<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="3" MadCap:lastHeight="72" MadCap:lastWidth="697" MadCap:disableMasterStylesheet="true" MadCap:tocPath="Additional Topics|Medical Imaging in IDL|Using IDL DICOM Network Services|Querying a Remote Machine" MadCap:medium="non-print" MadCap:InPreviewMode="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" MadCap:PathToHelpSystem="../../../" MadCap:HelpSystemFileName="idl.xml" MadCap:SearchType="Stem">
    <!-- saved from url=(0014)about:internet -->
    <head><title>Build or Modify a Custom Query</title>
        <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/Table_Format.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
        <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink" style="display: none;"><a href="../../../idl_CSH.html#DICOM_Medical/Using IDL DICOM Network Services/BuildOrModifyCustomQuery.html" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox"><a class="MCBreadcrumbsLink" href="../../OtherTopics.html">Additional Topics</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../Expanded DICOM Support in IDL/ExpandedDICOMFunctionality.html">Medical Imaging in IDL</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="Overview.html">Using IDL DICOM Network Services</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="QueryingRemoteMachine.html">Querying a Remote Machine</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Build or Modify a Custom Query</span>
        </div>
        <h2>Build or Modify a Custom Query</h2>
        <p class="Body"><span class="Bold"><a name="kanchor4915"></a></span>You can create a custom query to return patient or study files that match specific patient-, study-, or series-level characteristics. To create a custom query, complete the following steps:</p>
        <table class="AutoNumber_p_Bullet" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 16px;" />
            <col style="width: 24px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_Bullet" valign="top"><span>1. </span>
                </td>
                <td class="AutoNumber_p_Bullet" MadCap:autonum="1. " valign="top">Click the <span class="Bold">Build Query</span> button on the <span class="Bold">Query Retrieve SCU</span> tab to open the <span class="Bold">Query Fields</span> dialog.</td>
            </tr>
        </table>
        <table class="AutoNumber_p_Bullet" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 16px;" />
            <col style="width: 24px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_Bullet" valign="top"><span>2. </span>
                </td>
                <td class="AutoNumber_p_Bullet" MadCap:autonum="2. " valign="top">In the <span class="Bold">Query Model</span> area, select <span class="Bold">Patient Root</span> or <span class="Bold">Study Root</span>. This indicates the highest level of information that can be retrieved. For instance, if you select <span class="Bold">Study Root</span>, you cannot retrieve the study by selecting the associated patient. You must select a study, series or image to be retrieved. </td>
            </tr>
        </table>
        <p class="Note_Indented" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span><a name="kanchor4916"></a>To check what query models are supported by the remote node, use the <span class="Bold">Echo SCU</span> service on the <span class="Bold">Configuration</span> tab. Select the Query SCP entity in the droplist and click <span class="Bold">Echo</span>. If the echo is successful, query model information is printed following echo results in the <span class="Bold">Status</span> window. </p>
        <table class="AutoNumber_p_Bullet" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 16px;" />
            <col style="width: 24px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_Bullet" valign="top"><span>3. </span>
                </td>
                <td class="AutoNumber_p_Bullet" MadCap:autonum="3. " valign="top">In the <span class="Bold">Query Level</span> area, select <span class="Bold">Patient Level</span>, <span class="Bold">Study Level</span> or <span class="Bold">Series Level</span> to define patient, study or series characteristics against which files are matched.</td>
            </tr>
        </table>
        <p class="Note_Indented" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>Changing the query model or query level makes some query fields active and others insensitive. Any values shown in insensitive fields are not applied to the current query. </p>
        <table class="AutoNumber_p_Bullet" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 16px;" />
            <col style="width: 24px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_Bullet" valign="top"><span>4. </span>
                </td>
                <td class="AutoNumber_p_Bullet" MadCap:autonum="4. " valign="top">Click <span class="Bold">Apply </span>to store the query or <span class="Bold">Ok</span> to store the query and close the dialog. The specified query fields are applied to subsequent queries. If you select <span class="Bold">Clear</span>, the query will be performed at the <span class="Bold">Query Model</span> level. Select <span class="Bold">Cancel</span> to clear changes and revert to the last used query. Click the <span class="Bold">Help</span> button for information on using wildcards in attribute matching, and information on DICOM date formats. </td>
            </tr>
        </table>
        <h3>Attribute Matching Using Wildcards<a name="kanchor4917"></a></h3>
        <p class="Body">The implementation of the Query/Retrieve SCP service on the remote node determines the quality of attribute matching. All attribute matching is performed by the remote service. In addition to case sensitivity, matching can include one or more of the following: </p>
        <table style="caption-side: top;margin-left: auto;margin-right: auto;" class="TableStyle_Table_Format">
            <col width="152px" />
            <col width="309px" />
            <tbody>
                <tr>
                    <td>
                        <p class="CellBody">Single Value Matching</p>
                    </td>
                    <td>
                        <p class="CellBody">Matches single values.</p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p class="CellBody">Wildcard Matching </p>
                    </td>
                    <td>
                        <p class="CellBody">Use * to match zero or more characters.</p>
                        <p class="CellBody">Use ? to match any single character. </p>
                        <p class="CellBody">For example, to return patients with a name beginning with HA, use HA*. To return a list of patients whose names vary by one or more instances of a single value, use the ? character to indicate the wildcard value as in M?NROE.</p>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p class="CellBody">Range Matching</p>
                    </td>
                    <td>
                        <p class="CellBody">Use the - character in between date or time values to return any matches within that range. For example, to match any date in the first six months of the year, use 20050101-20050630. </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="Body">The following table indicates the value representation (VR) and what wildcards are supported in each query field. An "x" in the column indicates the wildcard is supported.</p>
        <table style="caption-side: bottom; mc-table-style: url('../../Resources/TableStyles/Table_Format.css'); margin-left: auto; margin-right: auto;" class="TableStyle_Table_Format" cellspacing="0">
            <col width="155px" />
            <col width="61px" />
            <col width="61px" />
            <col width="61px" />
            <col width="61px" />
            <thead>
                <tr>
                    <td class="TableStyle_Table_Format_Head_0_0_RowSep_ColSep">
                        <p class="CellHeading">Field</p>
                    </td>
                    <td class="TableStyle_Table_Format_Head_0_0_RowSep_ColSep">
                        <p class="CellHeading">VR</p>
                    </td>
                    <td class="TableStyle_Table_Format_Head_0_0_RowSep_ColSep">
                        <p class="CellHeading">*</p>
                    </td>
                    <td class="TableStyle_Table_Format_Head_0_0_RowSep_ColSep">
                        <p class="CellHeading">?</p>
                    </td>
                    <td class="TableStyle_Table_Format_Head_0_0_RowSep_ColEnd">
                        <p class="CellHeading">-</p>
                    </td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellBody">Patient Name</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">PN</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColEnd">
                        <p class="CellCentered">&#160;</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellBody">Family Name</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">PN</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColEnd">
                        <p class="CellCentered">&#160;</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellBody">Given Name</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">PN</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColEnd">
                        <p class="CellCentered">&#160;</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellBody">Middle Name</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">PN</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColEnd">
                        <p class="CellCentered">&#160;</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellBody">Prefix</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">PN</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColEnd">
                        <p class="CellCentered">&#160;</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellBody">Suffix</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">PN</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColEnd">
                        <p class="CellCentered">&#160;</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellBody">Patient ID</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">LO</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColEnd">
                        <p class="CellCentered">&#160;</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellBody">Study Date</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">DA</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">&#160;</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">&#160;</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColEnd">
                        <p class="CellCentered">x
                        </p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellBody">Study Time</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">TM</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">&#160;</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">&#160;</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColEnd">
                        <p class="CellCentered">x
                        </p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellBody">Accession Number</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">SH</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColEnd">
                        <p class="CellCentered">&#160;</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellBody">Study ID</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">SH</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellCentered">x
                        </p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColEnd">
                        <p class="CellCentered">&#160;</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_1_0_RowEnd_ColSep">
                        <p class="CellBody">Modality</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowEnd_ColSep">
                        <p class="CellCentered">CS</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowEnd_ColSep">
                        <p class="CellCentered">&#160;</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowEnd_ColSep">
                        <p class="CellCentered">&#160;</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowEnd_ColEnd">
                        <p class="CellCentered">&#160;</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
        </script>
    </body>
</html>