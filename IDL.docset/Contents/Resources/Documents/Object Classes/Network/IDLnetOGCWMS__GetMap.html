<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="3" MadCap:lastHeight="72" MadCap:lastWidth="697" MadCap:disableMasterStylesheet="true" MadCap:tocPath="IDL Programming|Objects|Network Object Classes|IDLnetOGCWMS" MadCap:medium="non-print" MadCap:InPreviewMode="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" MadCap:PathToHelpSystem="../../../" MadCap:HelpSystemFileName="idl.xml" MadCap:SearchType="Stem">
    <!-- saved from url=(0014)about:internet -->
    <head><title>IDLnetOGCWMS::GetMap</title>
        <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/Table_Format.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/Version_Table.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
        <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink" style="display: none;"><a href="../../../idl_CSH.html#Object Classes/Network/IDLnetOGCWMS__GetMap.html" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox"><a class="MCBreadcrumbsLink" href="../../IDL Programming.html">IDL Programming</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../ref_part2.html">Objects</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="objects_network.html">Network Object Classes</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="IDLnetOGCWMS.html">IDLnetOGCWMS</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">IDLnetOGCWMS::GetMap</span>
        </div>
        <h1 class="ObjMethod"><a name="objects_network_1009015_1395569"></a><a name="objects_network_1009015_33779"></a>I<a name="kanchor4715"></a>DLnetOGCWMS::GetMap</h1>
        <p class="CellBody" MadCap:conditions="Reference Material.Online_Help_Only">
            <MadCap:conditionalText MadCap:conditions="Reference Material.Online_Help_Only"><a class="MCXref" href="#objects_network_1009015_1395627">Syntax</a> | <a class="MCXref" href="#objects_network_1009015_1395632">Return Value</a> | <a class="MCXref" href="#objects_network_1009015_1395634">Arguments</a> | <a class="MCXref" href="#objects_network_1009015_1395780">Keywords</a> | <a class="MCXref" href="#objects_network_1009015_1395782">Examples</a> | <a class="MCXref" href="#objects_network_1009015_1395918">Version History</a> | <a class="MCXref" href="#objects_network_1009015_1395925">See Also </a></MadCap:conditionalText>
        </p>
        <p>The IDLnetOGCWMS::GetMap function method retrieves a map file from a remote OGC WCS server, and writes the file to disk. The file location is specified by the <a class="MCXref" href="IDLnetOGCWMS_Properties.html#objects_network_1009015_1393068">MAP_FILENAME</a> property, and will be overwritten if this property value remains unchanged between GetMap requests. </p>
        <p class="Note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>The <a class="MCXref" href="IDLnetOGCWMS_Properties.html#objects_network_1009015_1393513">URL_PATH</a> and <a class="MCXref" href="IDLnetOGCWMS_Properties.html#objects_network_1009015_1393474">URL_HOSTNAME</a> properties must be set before requesting information from a remote WCS server. You can either set these properties manually or pass a URL to the <a class="MCXref" href="IDLnetOGCWMS__ParseUrl.html#objects_network_1009015_1396203">IDLnetOGCWMS::ParseUrl</a> method prior to making a request. If you are dealing with a proxy server, you must also set the <a class="MCXref" href="IDLnetOGCWMS_Properties.html#objects_network_1009015_1393188">PROXY_HOSTNAME</a> and <a class="MCXref" href="IDLnetOGCWMS_Properties.html#objects_network_1009015_1393244">PROXY_PORT</a> properties to the correct values.</p>
        <p>This method returns only when one of the following occur: </p>
        <table class="AutoNumber_p_Bullet" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 16px;" />
            <col style="width: 24px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_Bullet" valign="top"><span>• </span>
                </td>
                <td class="AutoNumber_p_Bullet" MadCap:autonum="• " valign="top">Completes retrieval of information from server</td>
            </tr>
        </table>
        <table class="AutoNumber_p_Bullet" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 16px;" />
            <col style="width: 24px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_Bullet" valign="top"><span>• </span>
                </td>
                <td class="AutoNumber_p_Bullet" MadCap:autonum="• " valign="top">Encounters an HTTP error</td>
            </tr>
        </table>
        <table class="AutoNumber_p_Bullet" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 16px;" />
            <col style="width: 24px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_Bullet" valign="top"><span>• </span>
                </td>
                <td class="AutoNumber_p_Bullet" MadCap:autonum="• " valign="top">Encounters an OGC exception</td>
            </tr>
        </table>
        <table class="AutoNumber_p_Bullet" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 16px;" />
            <col style="width: 24px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_Bullet" valign="top"><span>• </span>
                </td>
                <td class="AutoNumber_p_Bullet" MadCap:autonum="• " valign="top">Responds to a cancel request as specified in a callback return value</td>
            </tr>
        </table>
        <p>You can implement a callback to return status information during the request by setting the <a class="MCXref" href="IDLnetOGCWMS_Properties.html#objects_network_1009015_1392783">CALLBACK_FUNCTION</a> property. You can also use a callback to cancel a request. See <a class="MCXref" href="IDLnetOGCWMS.html#objects_network_1009015_1402107">Using Callbacks with the IDLnetOGCWMS Object</a> for details. This method will throw an error if the GetMap request fails. </p>
        <h2><a name="objects_network_1009015_1395627"></a><a name="objects_network_1009015_98674"></a>Syntax</h2>
        <p class="Syntax"><i>Result = Obj</i>-&gt;[<a class="MCXref" href="IDLnetOGCWMS.html#objects_network_1009015_1392001">IDLnetOGCWMS</a>::]GetMap(<i>Map_Request</i>)</p>
        <h2><a name="objects_network_1009015_1395632"></a><a name="objects_network_1009015_18698"></a>Return Value</h2>
        <p>The return value is a string containing the path to the file returned by this request or an empty string if no file was returned. </p>
        <h2><a name="objects_network_1009015_1395634"></a><a name="objects_network_1009015_82500"></a>Arguments</h2>
        <h3 class="Argument">Map_Request</h3>
        <p>The <i>Map_Request</i> argument must be a string that contains the required parameters separated by the <span class="Courier">&amp;</span> character. These elements can be extracted from the structures returned by the <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394533">IDLnetOGCWMS::GetLayers</a> method. The required and optional elements are shown in the following table, and match those described in OGC Web Map Service (WMS) specification. See the OGC web site (<span class="Link"><a href="http://www.opengeospatial.org">www.opengeospatial.org</a></span>) for specification details. </p>
        <table style="width: 503px;caption-side: bottom;mc-table-style: url('../../Resources/TableStyles/Table_Format.css');" class="TableStyle_Table_Format" cellspacing="0">
            <col width="163px" />
            <col width="340px" />
            <thead>
                <tr>
                    <td class="TableStyle_Table_Format_Head_0_0_RowSep_ColSep">
                        <p class="CellHeading">Request Parameter</p>
                    </td>
                    <td class="TableStyle_Table_Format_Head_0_0_RowSep_ColEnd">
                        <p class="CellHeading">Description</p>
                    </td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellBody"><a name="objects_network_1009015_1395648"></a><a name="objects_network_1009015_54073"></a>LAYERS=layer_list</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColEnd">
                        <p class="CellBody">Comma-separated list of one or more map layers. Required. </p>
                        <p class="CellBody">Source — in the <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394651">Main Layer Structure</a> see <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394683">NAME</a>. Also see <a class="MCXref" href="#objects_network_1009015_1395766">Layer Names and Titles</a> below for more information. </p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellBody">STYLES=styles_list</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColEnd">
                        <p class="CellBody">Comma-separated list of one rendering style per requested layer. If set to “Style=” then the server will use the default style of the first layer requested. Required.</p>
                        <p class="CellBody">Source — in the <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1395375">Style Structure</a> see <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1395390">NAME</a>.</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellBody"><a name="objects_network_1009015_1395674"></a><a name="objects_network_1009015_26157"></a>SRS= namespace:identifier</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColEnd">
                        <p class="CellBody">Spatial Reference System used in 1.1.1 requests. Required.</p>
                        <p class="CellBody">Source — in the <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394651">Main Layer Structure</a> see <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394731">SRS</a>.</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellBody"><a name="objects_network_1009015_1395686"></a><a name="objects_network_1009015_10416"></a>CRS= namespace:identifier</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColEnd">
                        <p class="CellBody">Spatial Reference System used in 1.3.0 requests. Required.</p>
                        <p class="CellBody">Source — in the <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394651">Main Layer Structure</a> see <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394742">CRS</a>.</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellBody"><a name="objects_network_1009015_1395698"></a><a name="objects_network_1009015_49874"></a>BBOX=minx, miny, maxx, maxy</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColEnd">
                        <p class="CellBody">Request a coverage subset as defined by the bounding box coordinate pairs defining corners (lower left, upper right), in SRS or CRS units. Required.</p>
                        <p class="CellBody">Source — in the <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394651">Main Layer Structure</a>, see one of the following: </p>
                        <table class="AutoNumber_p_Bullet" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
                            <col style="width: 4.800001px;" />
                            <col style="width: 14.4px;" />
                            <col style="width: auto;" />
                            <tr>
                                <td valign="top" />
                                <td class="AutoNumber_p_Bullet" valign="top"><span>• </span>
                                </td>
                                <td class="AutoNumber_p_Bullet" MadCap:autonum="• " valign="top"><a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394748">LAT_LON_BBOX</a> (version 1.1.1)</td>
                            </tr>
                        </table>
                        <table class="AutoNumber_p_Bullet" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
                            <col style="width: 4.800001px;" />
                            <col style="width: 14.4px;" />
                            <col style="width: auto;" />
                            <tr>
                                <td valign="top" />
                                <td class="AutoNumber_p_Bullet" valign="top"><span>• </span>
                                </td>
                                <td class="AutoNumber_p_Bullet" MadCap:autonum="• " valign="top"><a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394758">EX_GEOBOX</a> (version 1.3.0)</td>
                            </tr>
                        </table>
                        <table class="AutoNumber_p_Bullet" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
                            <col style="width: 4.800001px;" />
                            <col style="width: 14.4px;" />
                            <col style="width: auto;" />
                            <tr>
                                <td valign="top" />
                                <td class="AutoNumber_p_Bullet" valign="top"><span>• </span>
                                </td>
                                <td class="AutoNumber_p_Bullet" MadCap:autonum="• " valign="top"><a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394773">BOUNDING_BOX</a> (version 1.1.1, 1.3.0)</td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellBody"><a name="objects_network_1009015_1395719"></a><a name="objects_network_1009015_34691"></a>WIDTH=output_width</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColEnd">
                        <p class="CellBody">Width of map image in pixels. Required.</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellBody"><a name="objects_network_1009015_1395724"></a><a name="objects_network_1009015_62734"></a>HEIGHT=output_height</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColEnd">
                        <p class="CellBody">Height of map image in pixels. Required.</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellBody">FORMAT= output_format</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColEnd">
                        <p class="CellBody">Output format of map. Required.</p>
                        <p class="CellBody">Source — in the <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394651">Main Layer Structure</a>, see <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394701">MAP_FORMAT</a>. </p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellBody">TRANSPARENT= TRUE | FALSE</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColEnd">
                        <p class="CellBody">Background transparency of map. Default is false. Optional.</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellBody">BG_COLOR= color_value</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColEnd">
                        <p class="CellBody">Hexadecimal RGB color value for the background color (default=0xFFFFFF). Optional.</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColSep">
                        <p class="CellBody">TIME=time</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowSep_ColEnd">
                        <p class="CellBody">Time value of layer desired in UTC format. Optional.</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColSep">
                        <p class="CellBody">ELEVATION=elevation</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_1_0_RowSep_ColEnd">
                        <p class="CellBody">Elevation of layer desired. Refer to section on Handling Multi-dimensional Datasets in the OGC WMS standard specification for details. Optional.</p>
                    </td>
                </tr>
                <tr>
                    <td class="TableStyle_Table_Format_Body_0_0_RowEnd_ColSep">
                        <p class="CellBody">Other sample dimension(s)</p>
                    </td>
                    <td class="TableStyle_Table_Format_Body_0_0_RowEnd_ColEnd">
                        <p class="CellBody">Value of other dimensions as appropriate. Optional.</p>
                    </td>
                </tr>
            </tbody>
            <caption valign="bottom" style="padding-bottom: 12pt;">
                <p class="TableTitle">Required and Optional Elements of a GetMap Request</p>
            </caption>
        </table>
        <h3><a name="objects_network_1009015_1395766"></a><a name="objects_network_1009015_68939"></a>Layer Names and Titles</h3>
        <p>If, and only if, a layer has a <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394683">NAME</a>, then that map layer can be requested using that NAME in the <a class="MCXref" href="#objects_network_1009015_1395648">LAYERS=layer_list</a> parameter of the <i>Map_Request</i> argument. A layer that contains a NAME element is referred to as a “named layer.” If the layer has a <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394688">TITLE</a> but no NAME (see <a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394688">TITLE</a>), then that layer is only a category title for all the layers nested within and cannot be requested. You need to access the names of the internal layers to request the corresponding maps. If a containing category does have a NAME, you can use this name to request all of the nested layers at one time. For example, a parent layer “Roads” may have children “Interstates” and “State Highways” and allow the user to request either child individually or both together. The NAME element is not inherited by child layers.</p>
        <h2><a name="objects_network_1009015_1395780"></a><a name="objects_network_1009015_51698"></a>Keywords</h2>
        <p>None</p>
        <h2><a name="objects_network_1009015_1395782"></a><a name="objects_network_1009015_63073"></a>Examples</h2>
        <p>The following example connects to an OGC server and calls GetCapabilities, GetLayers, and GetMap to return data from the server. Elements of the structure returned by GetLayers provide the required request parameters of the query defining the map file to return. </p>
        <p class="Note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;"><span class="autonumber"><span><b>Note: </b></span></span>You may need to replace the URL in the following example as there is no guarantee that the given OGC server will be available when you attempt to establish the connection. </p>
        <p class="Code">;-----------------------------------------------------------------</p>
        <p class="Code">FUNCTION ogc_wms_status_callback, status, data</p>
        <p class="Code">&#160;&#160;&#160;PRINT, status</p>
        <p class="Code">&#160;&#160;&#160;RETURN, 1</p>
        <p class="Code">END</p>
        <p class="Code">&#160;</p>
        <p class="Code">;-----------------------------------------------------------------</p>
        <p class="Code">PRO ogc_wms_GetMap_example</p>
        <p class="Code">&#160;&#160;&#160;compile_opt idl2</p>
        <p class="Code">&#160;&#160;&#160;; Catch all errors and display an error dialog.</p>
        <p class="Code">&#160;&#160;&#160;CATCH, errorStatus</p>
        <p class="Code">&#160;&#160;&#160;IF (errorStatus NE 0) THEN BEGIN</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;CATCH, /CANCEL</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;PRINT, !error_state.msg</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;RETURN</p>
        <p class="Code">&#160;&#160;&#160;ENDIF</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Create a new OGC WMS object.</p>
        <p class="Code">&#160;&#160;&#160;owms = OBJ_NEW('idlnetogcwms')</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Set a callback so we can see some status messages</p>
        <p class="Code">&#160;&#160;&#160;owms-&gt;SetProperty, CALLBACK_FUNCTION ='ogc_wms_status_callback'</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Get required property values by parsing URL.</p>
        <p class="Code">&#160;&#160;&#160;url ='http://igskmncngs056.cr.usgs.gov/wmsconnector/' + $</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;'com.esri.wms.Esrimap/world?'</p>
        <p class="Code">&#160;&#160;&#160;owms-&gt;ParseURL, url</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Determine what information is available.</p>
        <p class="Code">&#160;&#160;&#160;count = oWMS-&gt;GetCapabilities()</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Make sure server returned layers.</p>
        <p class="Code">&#160;&#160;&#160;IF count EQ 0 THEN BEGIN</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;void = $</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;DIALOG_MESSAGE('No information avaiable from WMS server')</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;RETURN</p>
        <p class="Code">&#160;&#160;&#160;ENDIF</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Get a single second level entry.</p>
        <p class="Code">&#160;&#160;&#160;xlayer = owms-&gt;GetLayers(INDEX=1, NUMBER=1, COUNT=cnt)</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Get name.</p>
        <p class="Code">&#160;&#160;&#160;vLayerName = xlayer[0].name</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Get style.</p>
        <p class="Code">&#160;&#160;&#160;vStyle = ''</p>
        <p class="Code">&#160;&#160;&#160;IF (xlayer[0].num_style NE 0) THEN BEGIN</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;vStyle = xlayer[0].style[0].name</p>
        <p class="Code">&#160;&#160;&#160;ENDIF</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Determine spatial reference system.</p>
        <p class="Code">&#160;&#160;&#160;IF (xlayer[0].version EQ '1.3.0') THEN BEGIN</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;vCrs = xlayer[0].crs</p>
        <p class="Code">&#160;&#160;&#160;ENDIF ELSE BEGIN</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;vCrs = xlayer[0].srs</p>
        <p class="Code">&#160;&#160;&#160;ENDELSE</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Get a bounding box</p>
        <p class="Code">&#160;&#160;&#160;vBBox =    xlayer[0].bounding_box[0].minx + $</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;', ' + xlayer[0].bounding_box[0].miny + $</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;', ' + xlayer[0].bounding_box[0].maxx + $</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;', ' + xlayer[0].bounding_box[0].maxy</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Get map format.</p>
        <p class="Code">&#160;&#160;&#160;IF (xlayer[0].num_map_format NE 0) THEN BEGIN</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;vMapFmt = xlayer[0].map_format</p>
        <p class="Code">&#160;&#160;&#160;ENDIF</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Hard-code width and height.</p>
        <p class="Code">&#160;&#160;&#160;width  = '500'</p>
        <p class="Code">&#160;&#160;&#160;height = '500'</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Create layer query string of required request elements.</p>
        <p class="Code">&#160;&#160;&#160;queryString = 'LAYERS=' + vLayerName</p>
        <p class="Code">&#160;&#160;&#160;queryString = queryString + '&amp;STYLES=' + vStyle</p>
        <p class="Code">&#160;&#160;&#160;queryString = queryString + '&amp;SRS='    + vCrs</p>
        <p class="Code">&#160;&#160;&#160;queryString = queryString + '&amp;BBOX='   + $</p>
        <p class="Code">&#160;&#160;&#160;&#160;&#160;&#160;STRCOMPRESS(vBBox, /REMOVE_ALL)</p>
        <p class="Code">&#160;&#160;&#160;queryString = queryString + '&amp;WIDTH='  + width</p>
        <p class="Code">&#160;&#160;&#160;queryString = queryString + '&amp;HEIGHT=' + height</p>
        <p class="Code">&#160;&#160;&#160;queryString = queryString + '&amp;FORMAT=' + vMapFmt</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Submit request for first file.</p>
        <p class="Code">&#160;&#160;&#160;mapFile = oWMS-&gt;GetMap(queryString[0])</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Print location of map file.</p>
        <p class="Code">&#160;&#160;&#160;PRINT, 'file retrieved = ', mapfile</p>
        <p class="Code">&#160;&#160;&#160;OBJ_DESTROY, owms</p>
        <p class="Code">&#160;</p>
        <p class="Code">&#160;&#160;&#160;; Scale the map image data into byte range and</p>
        <p class="Code">&#160;&#160;&#160;; open in the iImage iTool.</p>
        <p class="Code">&#160;&#160;&#160;imgData = READ_IMAGE(mapfile)</p>
        <p class="Code">&#160;&#160;&#160;iImage, BYTSCL(imgData)</p>
        <p class="Code">END</p>
        <h2><a name="objects_network_1009015_1395918"></a><a name="objects_network_1009015_63375"></a>Version History</h2>
        <p class="TableAnchor">&#160;</p>
        <table class="TableStyle_Version_Table" style="width: 499px;caption-side: top;mc-table-style: url('../../Resources/TableStyles/Version_Table.css');" cellspacing="0">
            <col width="91px" />
            <col width="408px" />
            <tbody>
                <tr>
                    <td class="TableStyle_Version_Table_Body_0_0_RowEnd_ColSep">
                        <p class="CellBody">6.4</p>
                    </td>
                    <td class="TableStyle_Version_Table_Body_0_0_RowEnd_ColEnd">
                        <p class="CellBody">Introduced</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2><a name="objects_network_1009015_1395925"></a><a name="objects_network_1009015_87591"></a>See Also </h2>
        <p><a class="MCXref" href="IDLnetOGCWMS__GetLayers.html#objects_network_1009015_1394533">IDLnetOGCWMS::GetLayers</a>, <a class="MCXref" href="IDLnetOGCWMS__GetFeature.html#objects_network_1009015_1394332">IDLnetOGCWMS::GetFeatureInfo</a></p>
        <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
        </script>
    </body>
</html>