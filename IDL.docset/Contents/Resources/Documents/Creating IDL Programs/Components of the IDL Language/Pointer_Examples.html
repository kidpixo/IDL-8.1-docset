<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:lastBlockDepth="3" MadCap:lastHeight="72" MadCap:lastWidth="697" MadCap:disableMasterStylesheet="true" MadCap:tocPath="IDL Programming|Concepts|IDL Data Types" MadCap:medium="non-print" MadCap:InPreviewMode="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" MadCap:PathToHelpSystem="../../../" MadCap:HelpSystemFileName="idl.xml" MadCap:SearchType="Stem">
    <!-- saved from url=(0014)about:internet -->
    <head><title>Pointer Examples</title>
        <link href="../../SkinSupport/MadCap.css" rel="stylesheet" />
        <link href="../../Resources/TableStyles/Figure_Format.css" rel="stylesheet" />
        <link href="../../Resources/Stylesheets/IDL_style.css" rel="stylesheet" />
        <script src="../../SkinSupport/MadCapAll.js" type="text/javascript">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink" style="display: none;"><a href="../../../idl_CSH.html#Creating IDL Programs/Components of the IDL Language/Pointer_Examples.html" style="">Open topic with navigation</a>
        </p>
        <div class="MCBreadcrumbsBox"><a class="MCBreadcrumbsLink" href="../../IDL Programming.html">IDL Programming</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="../../ProgrammingConcepts.html">Concepts</a><span class="MCBreadcrumbsDivider"> &gt; </span><a class="MCBreadcrumbsLink" href="IDL_Data_Types.html">IDL Data Types</a><span class="MCBreadcrumbsDivider"> &gt; </span><span class="MCBreadcrumbs">Pointer Examples</span>
        </div>
        <h1><a name="pointers_3224653378_997294"></a><a name="pointers_3224653378_87251"></a>Pointer Examples</h1>
        <p>Pointers <a name="kanchor3345"></a>are useful in building dynamic memory structures, such as <a name="kanchor3346"></a>linked lists and <a name="kanchor3347"></a>trees. The following examples demonstrate how pointers are used to build several types of dynamic structures. Note that the purpose of these examples is to illustrate simply and clearly how pointers are used. As such, they may not represent the “best” or most efficient way to accomplish a given task. Readers interested in learning more about efficient use of data structures are urged to consult any good text on data structures.</p>
        <h2><a name="pointers_3224653378_43899"></a>Creating a Linked List</h2>
        <p>The following example uses pointers to create and manipulate a <a name="kanchor3348"></a>linked list. One procedure reads string input from the keyboard and creates a list of pointers to heap variables that have the strings as their values. Another procedure prints the strings, given the pointer to the beginning of the linked list. A third procedure uses a modified “bubble sort” algorithm to reorder the values so the strings are in alphabetical order.</p>
        <h3>Creating the List</h3>
        <p><a name="kanchor3349"></a>The following program prompts the user to enter a series of strings from the keyboard. After reading each string, it creates a new heap variable containing a list element—an anonymous structure with two fields; one to hold the string data and one to hold a pointer to the next list element. Any number of strings can be entered. When the user is finished entering strings, the program can be exited by entering a period by itself at the “Enter string:” prompt.</p>
        <p class="ExampleCode" MadCap:autonum="&lt;b&gt;Example Code: &lt;/b&gt;"><span class="autonumber"><span><b>Example Code: </b></span></span>The source code for this example can be found in the file <code>ptr_read.</code><a name="kanchor3350"></a><code>pro</code> in the <code>examples/doc/language</code> subdirectory of the IDL distribution. Run the example procedure by entering <code>ptr_read</code> at the IDL command prompt or view the file in an IDL Editor window by entering <code>.EDIT ptr_read.pro</code>.</p>
        <p>Run the PTR_READ program by entering the following command at the IDL prompt:</p>
        <p class="Code">ptr_read, first</p>
        <p>Type a string, press Return, and the program prompts for another string. You can enter as many strings as you want. Each time a string is entered, PTR_READ creates a new list element with that string as its value. </p>
        <p>For example, you could enter the following three strings (used in the rest of this example):</p>
        <p class="Code">Enter a list of names.</p>
        <p class="Code">Enter a period (.) to stop list entry.</p>
        <p class="Code">Enter string: wilma</p>
        <p class="Code">Enter string: biff</p>
        <p class="Code">Enter string: cosmo</p>
        <p class="Code">Enter string: .</p>
        <p>The following figure shows one way of visualizing the linked list that we’ve created.</p>
        <table style="width: 517px;caption-side: bottom;mc-table-style: url('../../Resources/TableStyles/Figure_Format.css');" class="TableStyle_Figure_Format" cellspacing="0">
            <col width="517px" />
            <tbody>
                <tr>
                    <td class="TableStyle_Figure_Format_Body_0_0_RowEnd_ColEnd">
                        <p class="CellBody">&#160;</p>
                        <p style="text-align: center;">
                            <img src="../../images/67_1.jpg" />
                        </p>
                    </td>
                </tr>
            </tbody>
            <caption valign="bottom" style="padding-bottom: 12pt;">
                <p class="TableTitle">One way of visualizing the linked list created by the PTR_READ procedure</p>
            </caption>
        </table>
        <h3>Printing the Linked List</h3>
        <p><a name="kanchor3351"></a>The next program in our example accepts the pointer to the first element of the linked list and prints all the values in the list in order. To illustrate how the list is linked, we will also print the name of the heap variable that contains each element, and the name of the heap variable in the next field of that element.</p>
        <p class="ExampleCode" MadCap:autonum="&lt;b&gt;Example Code: &lt;/b&gt;"><span class="autonumber"><span><b>Example Code: </b></span></span>The source code for this example can be found in the file <span class="Courier">ptr_print.<a name="kanchor3352"></a>pro</span> in the <code>examples/doc/language</code> subdirectory of the IDL distribution. Run the example procedure by entering <code>ptr_print</code> at the IDL command prompt or view the file in an IDL Editor window by entering <code>.EDIT ptr_print.pro</code>.</p>
        <p>If we run the PTR_PRINT program with the list generated in the previous example:</p>
        <p class="Code">IDL&gt; ptr_print, first</p>
        <p>IDL prints:</p>
        <p class="Code">&lt;PtrHeapVar1&gt;, named wilma, has a pointer to: &lt;PtrHeapVar2&gt;</p>
        <p class="Code">&lt;PtrHeapVar2&gt;, named biff, has a pointer to: &lt;PtrHeapVar3&gt;</p>
        <p class="Code">&lt;PtrHeapVar3&gt;, named cosmo, has a pointer to: &lt;NullPointer&gt;</p>
        <h3>A Simple Sorting Routine for the Linked List</h3>
        <p><a name="kanchor3353"></a>The next example program takes a list generated by PTR_READ and moves the values so that they are in alphabetical order. The sorting algorithm used in this program is a variation on the classic “<a name="kanchor3354"></a>bubble sort”. However, instead of starting with the last element in the list and letting lower values “rise” to the top, this example starts at the top of the list and lets higher (“heavier”) values “sink” to the bottom of the list. Note that this is not a very efficient sorting algorithm and is shown as an illustration because of its simplicity. For real sorting applications, use IDL’s SORT function.</p>
        <p class="ExampleCode" MadCap:autonum="&lt;b&gt;Example Code: &lt;/b&gt;"><span class="autonumber"><span><b>Example Code: </b></span></span>The source code for this example can be found in the file <span class="Courier">ptr_sort.<a name="kanchor3355"></a>pro</span> in the <span class="Courier">examples/doc/language</span> subdirectory of the IDL distribution. Run the example procedure by entering <code>ptr_sort</code> at the IDL command prompt or view the file in an IDL Editor window by entering <code>.EDIT ptr_sort.pro</code>.</p>
        <p>To run the PTR_SORT routine with the list from our previous examples as input, enter:</p>
        <p class="Code">ptr_sort, first</p>
        <p>We can see the results of the sorting by calling the PTR_PRINT routine again:</p>
        <p class="Code">ptr_print, first</p>
        <p>IDL prints:</p>
        <p class="Code">&lt;PtrHeapVar1&gt;, named biff, has a pointer to: &lt;PtrHeapVar2&gt;</p>
        <p class="Code">&lt;PtrHeapVar2&gt;, named cosmo, has a pointer to: &lt;PtrHeapVar3&gt;</p>
        <p class="Code">&lt;PtrHeapVar3&gt;, named wilma, has a pointer to: &lt;NullPointer&gt;</p>
        <p>and we see that now the names are in alphabetical order.</p>
        <h2><a name="pointers_3224653378_21565"></a>Example Files—Using Pointers to Create Binary <a name="kanchor3356"></a>Trees</h2>
        <p>Two <a name="kanchor3357"></a>more-complicated example programs demonstrate the use of IDL pointers to create and search a simple tree structure. </p>
        <p class="ExampleCode" MadCap:autonum="&lt;b&gt;Example Code: &lt;/b&gt;"><span class="autonumber"><span><b>Example Code: </b></span></span>These files, named <span class="Courier">idl_tree.<a name="kanchor3358"></a>pro</span> and <span class="Courier">tree_example.<a name="kanchor3359"></a>pro</span>, can be found in the <span class="Courier">examples/doc/language </span>subdirectory of the IDL distribution. Run these example procedures by entering <code>idl_tree</code> or <code>tree_example </code>at the IDL command prompt or view the file in an IDL Editor window by entering <code>.EDIT idl_tree.pro </code>or<code> .EDIT tree_example.pro</code>.</p>
        <p>To run the tree examples, enter the following commands at the IDL prompt:</p>
        <p class="Code">; Compile the routines in idl_tree. The example routine calls the </p>
        <p class="Code">; routines defined in this file.</p>
        <p class="Code">.run idl_tree</p>
        <p class="Code">&#160;</p>
        <p class="Code">; Run the tree_example.</p>
        <p class="Code">tree_example</p>
        <p>The TREE_EXAMPLE and IDL_TREE routines create a binary tree with ten nodes whose values are structures that contain random values for two fields, “Time” and “Data”. The TREE_EXAMPLE routine then prints the tree sorted by both time and data. It then searches for and deletes the nodes containing the fourth and second data values. The resulting 8-node trees are again printed in both time and data order.</p>
        <p>A detailed explication of the TREE_EXAMPLE and IDL_TREE routines is beyond the scope of this chapter. Interested users should examine the files, starting with <span class="Courier">tree_example.pro</span>, to see how the trees are created and searched.</p>
        <script type="text/javascript" src="../../SkinSupport/MadCapBodyEnd.js">
        </script>
    </body>
</html>